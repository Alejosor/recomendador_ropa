<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Recomendador de Ropa</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <div class="container">
        <!-- Barra de usuario -->
        <div class="user-bar">
            {% if session.get('usuario') %}
                <p>ðŸ‘‹ Hola, {{ session['usuario'] }} |
                    <a href="{{ url_for('main.mis_compras') }}">Mis compras</a> |
                    <a href="{{ url_for('auth.logout') }}">Cerrar sesiÃ³n</a>
                </p>
            {% else %}
                <p>
                    <a href="{{ url_for('auth.login') }}">Iniciar sesiÃ³n</a> |
                    <a href="{{ url_for('auth.registro') }}">Registrarse</a>
                </p>
            {% endif %}
        </div>

        <!-- Mensajes flash -->
        {% with mensajes = get_flashed_messages(with_categories=True) %}
            {% if mensajes %}
                <div class="flash-messages">
                {% for categoria, mensaje in mensajes %}
                    <p class="flash flash-{{ categoria }}">{{ mensaje }}</p>
                {% endfor %}
                </div>
            {% endif %}
        {% endwith %}

        <!-- TÃ­tulo -->
        <h1>Productos Recomendados</h1>

        <!-- Enlace para ver el carrito -->
        <p><a href="{{ url_for('main.ver_carrito') }}">ðŸ›’ Ver carrito</a></p>

        <!-- Lista de productos -->
        <ul class="product-list">
            {% for producto in productos %}
                <li class="product-item">
                    <strong class="product-name">{{ producto.nombre }}</strong>
                    <span class="product-category">{{ producto.categoria }}</span>
                    <span class="product-price">S/ {{ producto.precio }}</span><br>
                    
                    <a href="{{ url_for('main.agregar_carrito', producto_id=producto.id) }}">Agregar al carrito</a>
                </li>
            {% endfor %}
        </ul>
    </div>
</body>
</html>
